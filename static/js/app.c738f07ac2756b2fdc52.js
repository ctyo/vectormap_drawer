webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),t("router-view")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"forkme-line",attrs:{href:"https://github.com/ctyo/vectormap_drawer"}},[t("img",{staticClass:"attachment-full size-full",attrs:{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_left_darkblue_121621.png?resize=149%2C149",alt:"Fork me on GitHub","data-recalc-dims":"1"}})])}]};var r=n("VU/8")({name:"App"},o,!1,function(e){n("qEwU")},null,null).exports,i=n("/ocq"),s=n("mvHQ"),l=n.n(s),p=n("1e2d"),u=n.n(p),c=n("oCme"),d=n.n(c),h=n("Njgl"),m=n("S/0q"),y=n("ADgS"),f={name:"Map",mounted:function(){this.$route.query.token&&(this.token=this.$route.query.token),this.$route.query.style&&(this.style=this.$route.query.style),this.$route.query.input&&(this.input=this.$route.query.input),this.drawMap()},methods:{drawMap:function(){var e=this;u.a.accessToken=this.token,this.map=new u.a.Map({container:"map",style:this.style,center:[139.767,35.681],zoom:11}),this.map.on("load",function(){e.map.addSource("trace",{type:"geojson",data:{type:"FeatureCollection",features:[]}}).addLayer({id:"trace-point",type:"circle",source:"trace",paint:{"circle-color":"red","circle-opacity":.6,"circle-radius":{base:1.75,stops:[[0,4],[22,180]]}},filter:["==","$type","Point"]}).addLayer({id:"trace-line",type:"line",source:"trace",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"red","line-width":5},filter:["==","$type","LineString"]}).addLayer({id:"trace-geohash",type:"fill",source:"trace",paint:{"fill-color":{type:"identity",property:"color"}},filter:["==","$type","Polygon"]}).addLayer({id:"trace-label",type:"symbol",source:"trace",layout:{"text-field":"{name}\n","text-size":12,"symbol-placement":"point","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"},paint:{"text-color":["case",["boolean",["feature-state","hover"],!1],"rgba(255,0,0,0.75)","rgba(255,0,0,0.75)"],"text-halo-color":["case",["boolean",["feature-state","hover"],!1],"rgba(255,255,0,0.75)","rgba(255,255,255,0.75)"],"text-halo-width":2,"text-halo-blur":0}}),e.inputChange()})},inputChange:function(){var e={type:"FeatureCollection",features:[]};this.input.split("\n").map(function(t){if(""!==t&&"\n"!==t)if(2===t.split(",").length){var n={type:"Feature",geometry:{type:"Point",coordinates:[1*t.split(",")[1],1*t.split(",")[0]]},properties:{name:t,"marker-color":"#3bb2d0","marker-size":"large","marker-symbol":"rocket"}};e.features.push(n)}else if(t.split(",").length===t.split("|").length+1)for(var a=t.split("|").map(function(e){return e.split(",")}),o=0;o<a.length;o++){var r={type:"Feature",geometry:{type:"Point",coordinates:[1*a[o][0],1*a[o][1]]},properties:{name:o+1,"marker-color":"#3bb2d0","marker-size":"large","marker-symbol":"rocket"}};e.features.push(r)}else if(t.length<12){var i=h.a.bounds(t),s={type:"Feature",geometry:{type:"Polygon",coordinates:[[[i.ne.lon,i.sw.lat],[i.ne.lon,i.ne.lat],[i.sw.lon,i.ne.lat],[i.sw.lon,i.sw.lat]]]},properties:{name:t,color:Object(m.geohashToRGB)(t,.3)}};e.features.push(s)}else{var l={type:"Feature",geometry:{type:"LineString",coordinates:d.a.decode(t).map(function(e){return[1*e[1],1*e[0]]})},properties:{name:t}};e.features.push(l)}}),this.geojson=l()(e,null,2),this.map.getSource("trace").setData(e),this.map.fitBounds(y(e)),console.dir(y(e)),this.changeUrl()},changeUrl:function(){this.$router.push({path:"/",query:{token:this.token!==this.mapstyles[0].token?this.token:"",style:this.style!==this.mapstyles[0].style?this.style:"",input:this.input}})}},data:function(){return{map:null,mapstyles:[{id:"mapbox",token:"pk.eyJ1IjoiY3R5byIsImEiOiJjanF2cTNjMm8weHVjNDJrOGV2anp3NDFwIn0.4pGtZ9Run1--9FR8NBkuqg",style:"mapbox://styles/ctyo/ckbvv9hj50ite1ho6xrmqyqd8"}],token:"pk.eyJ1IjoiY3R5byIsImEiOiJjanF2cTNjMm8weHVjNDJrOGV2anp3NDFwIn0.4pGtZ9Run1--9FR8NBkuqg",style:"mapbox://styles/ctyo/ckbvv9hj50ite1ho6xrmqyqd8",input:"35.7094313,139.7130015\n35.6590845,139.6552845\n35.6563709,139.7610576\neixxEqiftYaaD|jQhgHcyA??\nxn774\nxn7784\nxn777\nxn774fk",geojson:"{}"}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{attrs:{id:"map"}}),e._v(" "),n("div",{attrs:{id:"control"}},[n("select",{attrs:{name:"”mapstyle”"}},e._l(e.mapstyles,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n        "+e._s(t.id)+"\n      ")])}),0),e._v(" "),n("br"),e._v(" "),n("input",{attrs:{id:"tile",type:"text",placeholder:"tile style"},domProps:{value:e.style}}),e._v(" "),n("input",{attrs:{id:"token",type:"text"},domProps:{value:e.token}}),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("input")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],domProps:{value:e.input},on:{change:e.inputChange,input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),n("p",[e._v("geojson")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.geojson,expression:"geojson"}],domProps:{value:e.geojson},on:{input:function(t){t.target.composing||(e.geojson=t.target.value)}}})])])},staticRenderFns:[]};var g=n("VU/8")(f,v,!1,function(e){n("xhEI")},"data-v-5dac3d68",null).exports,b=n("AYPi"),k=n.n(b);a.a.use(i.a),a.a.use(k.a,{id:"UA-11027566-8"});var x=new i.a({routes:[{path:"/",name:"Map",component:g}]});n("xnE8");a.a.config.productionTip=!1,new a.a({el:"#app",router:x,components:{App:r},template:"<App/>"})},qEwU:function(e,t){},xhEI:function(e,t){},xnE8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c738f07ac2756b2fdc52.js.map